<!DOCTYPE html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>Serum Now Uses 2-Pass Approach - Serum</title><link rel=stylesheet href=/Serum/assets/css/style.css><link rel=stylesheet href=/Serum/assets/css/prism.css><div id=wrapper><header id=top><h1><a href=/Serum/ >Serum</a></h1><p>A simple static website generator</header><nav><ul><li><a href=/Serum/index.html>Home</a><li><a href=/Serum/getting-started.html>Getting Started</a><li><a href=/Serum/microscope.html>Microscope</a><li><a href=/Serum/docs/index.html>Docs</a><li><a href=/Serum/posts>Posts</a></ul></nav><hr><main><article class=post><header><h1>Serum Now Uses 2-Pass Approach</h1><p>Sunday, 21 May 2017 <span class=tags>Tags: <a class=tag href=/Serum/tags/development>development</a> <a class=tag href=/Serum/tags/news>news</a> <a class=tag href=/Serum/tags/serum>serum</a></span></header><div><p>For a recent few days, I have worked on changing Serum’s internal behavior on a different branch, and this branch was finally merged to master. Now Serum builds projects through 2-pass procedure!<p>Until now, Serum has built projects in a single pass like this:<blockquote><ul><li><p><strong>Preparation</strong><ul><li>Load and compile templates<li>Compile nav area (&#x2a;)</ul><li><p><strong>Page Builder</strong><ul><li>Scan for page source files<li>Collect page information<li>Render each page into HTML</ul><li><p><strong>Post Builder</strong><ul><li>Scan for post source files<li>Collect post information<li>Render each post into HTML</ul><li><p><strong>Index Builder</strong><ul><li>Generate tags information<li>Generate(Render) post listings</ul><li><p><strong>Finishing touch, cleanup, &hellip;</strong><ul><li>Copy assets and media (if any)</ul></ul></blockquote><p>This procedure is simple, and is working great. The website you are looking at right now is also made through this steps. However, this 1-pass approach has some drawbacks. What if you want to put information about the latest blog post in the “sidebar” area? How can you automatically populate the navigation area based on a list of existing pages in the website? <strong>You can not.</strong> In order to do so, you need to give the templates instructions to utilize page(or post) information, but these templates must be already compiled before Serum starts rendering any pages, blog posts or post listings. And it is obvious that templates don’t know anything about pages or posts at that moment.<p>To make an opportunity to resolve these problems, I splitted some procedures into two passes:<blockquote><ul><li><p><strong>Page Builder (Pass 1)</strong><ul><li>Scan for page source files<li>Collect page information</ul><li><p><strong>Post Builder (Pass 1)</strong><ul><li>Scan for post source files<li>Collect post information</ul><li><p><strong>Template Loader</strong><ul><li>Load and compile templates<li>Compile nav area (&#x2a;)</ul><li><p><strong>Page Builder (Pass 2)</strong><ul><li>Render each page into HTML</ul><li><p><strong>Post Builder (Pass 2)</strong><ul><li>Render each page into HTML</ul><li><p><strong>Index Builder</strong><ul><li>Generate tags information<li>Generate(Render) post listings</ul><li><p><strong>Finishing touch, cleanup, &hellip;</strong><ul><li>Copy assets and media (if any)</ul></ul></blockquote><p>If you are using the latest snapshot(commit) of Serum, you are already building your website with 2-pass-enabled Serum! As I said at the beginning of this post, all that changed is only the internal behavior of Serum. So you may not notice any changes but slightly increased build time. But now it became much easier for me to implement new features which can help you make richer static website. So keep an eye on this blog for new updates!<h3>Footnote</h3><p>(&#x2a;) The template for the navigation area (<code class=inline>templates/nav.html.eex</code>) will be moved to <code class=inline>includes</code> directory sooner or later. This is the new feature which adds some flexibility in using EEx templates.</div></article></main><hr><footer><p>Copyright &copy; 2017 Dalgona. <a href=https://dalgona.github.io/ >[Website]</a> <a href=https://github.com/Dalgona>[GitHub]</a><p>This website was generated by <a href=https://github.com/Dalgona/Serum>Serum</a>.</footer></div><script src=/Serum/assets/js/prism.js></script>
