<!DOCTYPE html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><title>New Stuff So Far - Serum</title><link rel=stylesheet href=/Serum/assets/css/style.css><link rel=stylesheet href=/Serum/assets/css/prism.css><div id=wrapper><header id=top><h1><a href=/Serum/ >Serum</a></h1><p>A simple static website generator</header><nav><ul><li><a href=/Serum/index.html>Home</a><li><a href=/Serum/getting-started.html>Getting Started</a><li><a href=/Serum/microscope.html>Microscope</a><li><a href=/Serum/docs/index.html>Docs</a><li><a href=/Serum/posts>Posts</a></ul></nav><hr><main><article class=post><header><h1>New Stuff So Far</h1><p>Thursday, 24 Aug 2017 <span class=tags>Tags: <a class=tag href=/Serum/tags/changes/index.html>changes</a> <a class=tag href=/Serum/tags/development/index.html>development</a> <a class=tag href=/Serum/tags/news/index.html>news</a> <a class=tag href=/Serum/tags/serum/index.html>serum</a></span></header><div><p>This post lists new features and changes introduced so far since the last post.<h2>Detailed Help Text</h2><p>Now the Serum command line program displays more detailed help texts for each task. If <code class=inline>serum help</code> is run without any argument, the program will print a list of available tasks:<p><img src=/Serum/media/2017-08-24-updates/01-serum-help.png alt="output of &quot;serum help&quot;"><p>And, for example, if you run <code class=inline>serum help build</code>, it will print a detailed documentation about the <code class=inline>build</code> task:<p><img src=/Serum/media/2017-08-24-updates/02-serum-help-build.png alt="output of &quot;serum help&quot;"><p>The program uses undocumented <code class=inline>IO.ANSI.Docs</code> built-in module to display the help texts for now. This module is internally used in IEx sessions for displaying documentations.<h2>Exit Codes</h2><p>This is also about the Serum command line program. Until now, the program always returned exit status of <code class=inline>0</code> no matter how the task ended, except that it crashes. But now it returns three different exit code depending on the result of the task:<ul><li><code class=inline>0</code>: The task ended successfully (Some warnings might have been emitted).<li><code class=inline>1</code>: An error occurred while running the given task.<li><code class=inline>2</code>: There is a problem in the command line argument.</ul><h2>Your Templates Can Do More</h2><p>Three new variables became available for use in EEx any templates: <code class=inline>pages</code>, <code class=inline>posts</code> and <code class=inline>tags</code>. These are lists of pages, blog posts and tags respectively.<p>Also, I recently added support for EEx pages. And guess what, you can use all of template variables and helper macros in your EEx pages! These two changes may significantly improve flexibility of your website structure. For example, only <code class=inline>templates/list.html.eex</code> could contain a list of blog posts so far. But now you can make the front page (i.e. <code class=inline>index.html</code>) to have a list of recent 5 posts, and a lot more!<pre><code class=lang-markup>pages/index.html.eex:

---
metadata ...
---

&lt;h1&gt;Welcome to my website!&lt;/h1&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, ...&lt;/p&gt;

&lt;h2&gt;Recent Posts&lt;/h2&gt;
&lt;ul&gt;
  &lt;%= for post &lt;- Enum.take(posts, 5) do %&gt;
    &lt;!-- Posts are sorted by date in decending order. --&gt;
    &lt;li&gt;&lt;%= post.title %&gt;&lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;</code></pre><p>For right now, “EEx pages” feature only supports HTML output. But someday you may be able to use <code class=inline>*.md.eex</code> too.<h2>Post Date</h2><p>Serum no longer parses file names in <code class=inline>/path/to/project/posts</code> directory to extract date information. Instead, you need to specify post date in the header area. This means that you can now give whatever name you want to your post source file.<pre><code class=lang-markdown>posts/0001-test-post.md:

---
title: Test Post
date: 2017-08-24 21:02:00
tags: serum, test, dev
---

The quick brown fox jumps over the lazy dog ...</code></pre><p>Looking at the third line, you can see you need to specify the date in <code class=inline>YYYY-MM-DD hh:mm:ss</code> format.<h2>Additional Metadata for Your Pages</h2><p>Three new metadata keys have been added: <code class=inline>label</code>, <code class=inline>group</code> and <code class=inline>order</code>. These metadata can be useful when you are building the global navigation or some index pages. Since the detailed explanation of these metadata can be found <a href=/Serum/docs/pages.html>here</a>, let’s jump right into the real examples.<p>Suppose that you have some pages listed below:<table><col><col><col><col><col><thead><tr><th style=text-align:left>file<th style=text-align:left>title<th style=text-align:left>label<th style=text-align:left>group<th style=text-align:left>order</thead><tr><td style=text-align:left><code class=inline>index.html</code><td style=text-align:left>Welcome<td style=text-align:left>Home<td style=text-align:left><code class=inline>main-nav</code><td style=text-align:left>10<tr><td style=text-align:left><code class=inline>contacts.md</code><td style=text-align:left>Contact Me<td style=text-align:left>Contacts<td style=text-align:left><code class=inline>main-nav</code><td style=text-align:left>90<tr><td style=text-align:left><code class=inline>works/index.html.eex</code><td style=text-align:left>My Works<td style=text-align:left>Works<td style=text-align:left><code class=inline>main-nav</code><td style=text-align:left>25<tr><td style=text-align:left><code class=inline>works/projects.md</code><td style=text-align:left>My Projects<td style=text-align:left><td style=text-align:left><code class=inline>works</code><td style=text-align:left>1<tr><td style=text-align:left><code class=inline>works/collaborations.md</code><td style=text-align:left>My Collaborations<td style=text-align:left><td style=text-align:left><code class=inline>works</code><td style=text-align:left>2<tr><td style=text-align:left><code class=inline>profile.md</code><td style=text-align:left>About Me<td style=text-align:left>Profile<td style=text-align:left><code class=inline>main-nav</code><td style=text-align:left>20</table><p>And you need to make the navigation area with EEx template. Then you could write the code like this:<pre><code class=lang-markup>includes/nav.html.eex:

&lt;ul&gt;
  &lt;%= for page &lt;- pages, page.group == &quot;main-nav&quot; do %&gt;
    &lt;li&gt;&lt;a href=&quot;&lt;%= page.url %&gt;&quot;&gt;&lt;%= page.label %&gt;&lt;/a&gt;&lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;</code></pre><p>These new metadata work well with templates. All item in <code class=inline>pages</code> list is sorted by the value of <code class=inline>order</code> in ascending order. So the rendered result may look like this:<pre><code class=lang-markup>&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;/my-site/index.html&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;/my-site/profile.html&quot;&gt;Profile&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;/my-site/works/index.html&quot;&gt;Works&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;/my-site/contacts.html&quot;&gt;Contacts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</code></pre><h2>That’s it!</h2><p>Lots of things have been added and changed for a last few months, and I’m glad to finally announce these changes. If you have any comments or great ideas, feel free to share your words with us!<ul><li><a href=https://github.com/Dalgona/Serum/issues>GitHub Issues</a><li>Email: <a href=mailto:dalgona@hontou.moe>dalgona@hontou.moe</a></ul></div></article></main><hr><footer><p>Copyright &copy; 2017 Dalgona. <a href=https://dalgona.github.io/ >[Website]</a> <a href=https://github.com/Dalgona>[GitHub]</a><p>This website was generated by <a href=https://github.com/Dalgona/Serum>Serum</a>.</footer></div><script src=/Serum/assets/js/prism.js></script>
